!function(a){"use strict";a(function(){function b(b,c){a("#stageRangeText").text(c.values[0]===c.values[1]?c.values[1]+" этаж":"С "+c.values[0]+" по "+c.values[1]+" этаж")}function c(b,c){var e=a("#stageRangeText").closest(".b-dropdown-button");e.find(".b-dropdown-text").text(c.values[0]===c.values[1]?c.values[1]+" этаж":c.values[0]+"-"+c.values[1]+" этаж"),e.find('[name="MIN_STAGE"]').val(c.values[0]),e.find('[name="MAX_STAGE"]').val(c.values[1]),d(e)}function d(b){var c,d=b.closest("form");c=window.matchMedia("(min-width: 576px)").matches?200:1e3,clearTimeout(f),f=setTimeout(function(){window.matchMedia("(min-width: 576px)").matches?b.find(".b-dropdown").slideUp():(a(".b-filter__sort").slideUp(),a(".b-filter__menu-body").slideUp()),g&&(g=!1,a.ajax({url:d.attr("action"),type:d.attr("method"),dataType:"html",data:d.serialize(),beforeSend:function(){a(".b-filter__result").addClass("i-hidden"),setTimeout(function(){a(".b-filter").addClass("i-preloader")},300),window.history.replaceState({},"",String(window.location).substring(0,String(window.location).indexOf("?"))+"?"+d.serialize());var b=d.find("input[name=ELEMENT]").val();Cookies.set("filter"+b,d.serialize(),{expires:365,path:window.location.pathname})},success:function(b){setTimeout(function(){a(".b-filter").removeClass("i-preloader"),a(".b-filter__result").html(b).removeClass("i-hidden"),g=!0},300)},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}}))},c)}function e(a){for(var b={},c=("?"===a[0]?a.substr(1):a).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]||"")}return b}var f,g=!0;window.matchMedia("(max-width: 575px)").matches&&(a(".b-filter__icon").click(function(b){b.preventDefault(),a(".b-filter__menu-body").slideToggle(),a(".b-filter__sort").slideUp()}),a(".b-filter__sort-icon").click(function(b){b.preventDefault(),a(".b-filter__sort").slideToggle(),a(".b-filter__menu-body").slideUp()})),a(".b-dropdown-button").click(function(b){b.preventDefault();var c=a(this),d=!0;c.find(".b-dropdown").is(":hidden")&&(d=!1),a(".b-dropdown").slideUp(),d||c.find(".b-dropdown").slideToggle()}),a(".b-dropdown").click(function(a){a.stopPropagation()}),a(document).bind("click",function(b){a(b.target).closest(".b-dropdown-button").length||a(".b-dropdown").slideUp()}),a(".b-dropdown :radio").change(function(){var b=a(this),c=b.closest(".b-dropdown-button");c.find(".b-dropdown-text").text(b.siblings("label").text()),d(c)}),a("#stageRangeSlider").slider({range:!0,min:a("#stageRangeSlider").data("min"),max:a("#stageRangeSlider").data("max"),values:[a("#stageRangeSlider").closest(".b-dropdown-button").find("[name=MIN_STAGE]").val(),a("#stageRangeSlider").closest(".b-dropdown-button").find("[name=MAX_STAGE]").val()],slide:function(a,c){b(a,c)},change:function(a,b){c(a,b)}}),a("#stageRangeText").text(a("#stageRangeSlider").slider("values",0)===a("#stageRangeSlider").slider("values",1)?a("#stageRangeSlider").slider("values",0)+" этаж":"С "+a("#stageRangeSlider").slider("values",0)+" по "+a("#stageRangeSlider").slider("values",1)+" этаж");var h=a(".b-filter input[name=ELEMENT]").val(),i={};window.location.search?i=e(window.location.search):Cookies.get("filter"+h)&&(i=e(Cookies.get("filter"+h)));var j;for(var k in i)if(j=a(".b-filter__menu form [name="+k+"]"),j.length)switch(j.attr("type")){case"radio":i[k]&&j.closest(".b-filter__menu-item, .b-filter__sort-item").find("[value="+i[k]+"]").attr({checked:"checked"}).change();break;case"hidden":j.val(i[k]),"MIN_STAGE"===k&&i.MAX_STAGE&&(b(null,{values:[i.MIN_STAGE,i.MAX_STAGE]}),a("#stageRangeSlider").slider("values",0,i.MIN_STAGE),a("#stageRangeSlider").slider("values",1,i.MAX_STAGE),c(null,{values:[i.MIN_STAGE,i.MAX_STAGE]}))}})}(jQuery);