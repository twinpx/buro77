!function(a){"use strict";a(function(){function b(){var b=a(".b-el-small");a.ajax({url:b.data("ajax-url"),type:b.data("ajax-method"),dataType:"html",success:function(c){function d(a){var b=Number(500*Math.random()).toFixed(2);setTimeout(function(){a.closest(".b-el-small__i").addClass("i-loaded")},b)}b.html(c),a(".b-el-small__i__img-bw").each(function(){var b=this,c=a(b);b.complete?d(c):c.load(function(){d(c)})})},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}})}a(".b-el-small__menu a").click(function(c){c.preventDefault(),a(".b-el-small__menu a").removeClass("i-active"),a(this).addClass("i-active"),a("[data-tab]").hide(),a('[data-tab="el-'+a(this).data("href")+'"]').show(),"list"!==a(this).data("href")||a(".b-el-small__wrapper").length||b()}),a(".b-el-small__menu a:first").click(),a("#elSmallMap").addClass("i-no-map"),a(window).scroll(function(){if(a("#elSmallMap").hasClass("i-no-map")){var b=a(document).scrollTop()+parseInt(window.screen.height)-50;if(a("#elSmallMap.i-no-map").offset().top<b){a("#elSmallMap").removeClass("i-no-map");var c=document.createElement("script");c.async=!0,c.defer=!0,c.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBIBtmSOttEUoOM-fuV3gEtf_kGoZhm-YE&callback=initMap";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}}}).scroll()}),window.initMap=function(){var b=[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#373737"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#212121"}]}];a.ajax({url:a("#elSmallMap").data("ajax-url"),type:a("#elSmallMap").data("ajax-method"),dataType:"json",success:function(c){var d=[0,0];if(c&&"object"==typeof c.markers){"object"==typeof c.current?d=c.current.position:window.listSmallMapLat&&window.listSmallMapLng&&(d={lat:window.listSmallMapLat,lng:window.listSmallMapLng});var e=window.listSmallMapZoom||12,f=new google.maps.Map(document.getElementById("elSmallMap"),{center:d,zoom:e,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,styles:b});if("object"==typeof c.current){var g=new google.maps.Marker({position:d,map:f,icon:"/upload/gmaps-marker-current.png"});g.addListener("mouseover",function(b){a("#infoWindow").append('<div class="b-infowindow"><img src="'+c.current.image+'" width="90" height="90" alt=""><div class="b-infowindow__text"><b>'+c.current.title+"</b><br><span>"+c.current.text+"</span></div></div>");var d=b.xa;for(var e in b)b[e]&&b[e].clientX&&b[e].clientY&&(d=b[e]);if(d){var f=d.clientX,g=d.clientY+(window.pageYOffset||document.documentElement.scrollTop)-130,h=a(document).width();247>h-f&&(f=h-250),g<a("#elSmallMap").offset().top&&(g=d.clientY+40),a("#infoWindow").offset({top:g,left:f})}}),g.addListener("mouseout",function(){a("#infoWindow").empty()})}var h=[],i="/upload/houses.png";c.markers.forEach(function(b,c){h[c]=new google.maps.Marker({position:b.position,map:f,icon:i}),h[c].addListener("mouseover",function(c){a("#infoWindow").append('<div class="b-infowindow"><img src="'+b.image+'" width="90" height="90" alt=""><div class="b-infowindow__text"><b>'+b.title+"</b><br><span>"+b.text+"</span></div></div>");var d;for(var e in c)c[e]&&c[e].clientX&&c[e].clientY&&(d=c[e]);if(d){var f=d.clientX,g=d.clientY+(window.pageYOffset||document.documentElement.scrollTop)-130,h=a(document).width();247>h-f&&(f=h-250),g<a("#elSmallMap").offset().top&&(g=d.clientY+40),a("#infoWindow").offset({top:g,left:f})}}),h[c].addListener("mouseout",function(){a("#infoWindow").empty()}),h[c].addListener("click",function(){window.location.href=b.href})});{new MarkerClusterer(f,h,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})}}},error:function(a,b,c){window.console&&(console.log(a),console.log(b),console.log(c))}})}}(jQuery);